# 문제 해결 교훈

## 핵심 원칙
**FM대로 복잡하게 생각하지말고 문제 해결할때에는 최대한 단순하고 명확한것을 추구하자**

## 실제 사례: Electron MQTT 새로고침 문제 (2024-12)

### 문제
- Electron에서 페이지 새로고침 시 간헐적으로 MQTT 연결이 먹통
- "Connection closed" 에러 발생

### 복잡한 접근 (❌)
- 버퍼링 로직 추가
- 상태 리셋 로직 추가
- 여러 파일에 방어 코드 분산

### 단순한 해결책 (✅)
- **근본 원인**: `disconnect()` → `connect()` 레이스 컨디션
- **해결**: `disconnectAsync()` 추가하여 연결 종료를 기다린 후 새 연결 시작
- **한 곳에서 문제 해결**: `electron/main/mqtt/client.ts`

### 교훈
1. 증상이 아닌 근본 원인을 찾아라
2. 여러 곳에 방어 코드를 뿌리지 말고, 문제의 원점에서 해결하라
3. 비동기 작업은 완료를 기다려라 (async/await)
4. 로그를 잘 읽으면 답이 보인다

## 적용 원칙
- 복잡한 해결책 → 더 단순한 방법이 있는지 먼저 고민
- 여러 파일 수정 → 한 곳에서 해결 가능한지 검토
- 증상 치료 → 근본 원인 파악 우선
